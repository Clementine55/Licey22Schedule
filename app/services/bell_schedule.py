# app/services/bell_schedule.py

"""
Централизованное хранилище всех вариантов расписания звонков.
"""

BELLS = {
    "Обычный день": {
        "1 смена": {
            # Расписание для 1-й смены (оставьте как есть или поправьте, если оно тоже изменилось)
            "8:30": "9:10",
            "9:15": "9:55",
            "10:05": "10:45",
            "10:55": "11:35",
            "11:45": "12:25",
            "12:35": "13:15",
            "13:25": "14:05",
            "14:15": "14:55",
            "15:05": "15:45"
        },
        # --- ИСПРАВЛЕННОЕ РАСПИСАНИЕ ДЛЯ 2-Й СМЕНЫ ---
        "2 смена": {
            "12:35": "13:15",
            "13:25": "14:05",
            "14:15": "14:55",
            "15:05": "15:45",
            "15:55": "16:35",
            "16:40": "17:20",
            "17:25": "18:05",
            "18:10": "18:50"
        }
    },
    "Короткий день": {
        # Если у вас есть короткие дни, их расписание тоже нужно проверить и, при необходимости, исправить
        "1 смена": {
            "8:30": "9:00",
            "9:05": "9:35",
            "9:45": "10:15",
            "10:25": "10:55",
            "11:05": "11:35"
        },
        "2 смена": {
            "11:40": "12:10",
            "12:15": "12:45",
            "12:55": "13:25",
            "13:35": "14:05",
            "14:15": "14:45"
        }
    }
}

def get_end_time(start_time: str, shift: str, day_type: str = "Обычный день") -> str or None:
    """
    Безопасно получает время окончания урока по времени начала, смене и типу дня.
    Если тип дня или смена не найдены, вернет None.
    """
    return BELLS.get(day_type, {}).get(shift, {}).get(start_time)