<!DOCTYPE html>
<html lang="ru" data-bs-theme="dark">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, viewport-fit=cover">
    <title>–†–∞—Å–ø–∏—Å–∞–Ω–∏–µ –õ–∏—Ü–µ–π 22</title>
    <link rel="icon" href="{{ url_for('static', filename='favicon.ico') }}">
    <link href="{{ url_for('static', filename='css/bootstrap.min.css') }}" rel="stylesheet">
    <link rel="stylesheet" href="{{ url_for('static', filename='css/style.css') }}">

</head>
<body>
    <div class="portrait-view">
        <div class="container">
            <header class="header">
                {% if logo_path %}
                    <img src="{{ url_for('static', filename=logo_path) }}" alt="–õ–æ–≥–æ—Ç–∏–ø" class="logo-img">
                {% endif %}
                <div class="header-info">
                    <span id="current-date-portrait">{{ current_date }}</span>
                    <span id="live-time-portrait">00:00:00</span>
                </div>
            </header>

            <div id="schedule-display" class="is-prompting">
                 <div class="initial-prompt">
                    <div class="prompt-icon">üìÖ</div>
                    <h3>–†–∞—Å–ø–∏—Å–∞–Ω–∏–µ –Ω–µ –≤—ã–±—Ä–∞–Ω–æ</h3>
                    <p>–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –ø–∞–Ω–µ–ª—å –≤—ã–±–æ—Ä–∞ –¥–ª—è –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è —Ä–∞—Å–ø–∏—Å–∞–Ω–∏—è</p>
                    <div class="prompt-help">
                        <button id="help-icon" class="help-button" aria-label="–ü–æ–º–æ—â—å">?</button>
                    </div>
                </div>
            </div>

            <div class="content-spacer"></div>
        </div>

        <!-- SELECTION PANEL -->
        <div class="selection-panel">
            <div id="selection-container">
                <div class="row g-2 align-items-end">
                    <div class="col">
                        <label for="grade-selector" class="form-label">–ü–∞—Ä–∞–ª–ª–µ–ª—å</label>
                        <select id="grade-selector" class="form-select form-select-lg" autocomplete="off">
                            <option selected disabled>--</option>
                        </select>
                    </div>
                    <div class="col">
                        <label for="class-selector" class="form-label">–ö–ª–∞—Å—Å</label>
                        <select id="class-selector" class="form-select form-select-lg" disabled autocomplete="off">
                            <option selected disabled>--</option>
                        </select>
                    </div>
                    <div class="col-auto">
                        <button id="reset-button" class="btn btn-secondary btn-lg w-100">–°–±—Ä–æ—Å</button>
                    </div>
                </div>
            </div>
        </div>

        <!-- BACK/CHANGE CLASS PANELS FOR DESKTOP VIEW -->
        <div id="back-panel-left" class="back-panel">
            <button id="back-button-left" aria-label="–°–º–µ–Ω–∏—Ç—å –∫–ª–∞—Å—Å">
                <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M19 12H5M12 19l-7-7 7-7"/></svg>
            </button>
        </div>
        <div id="back-panel-right" class="back-panel">
            <button id="back-button-right" aria-label="–°–º–µ–Ω–∏—Ç—å –∫–ª–∞—Å—Å">
                <svg xmlns="http://www.w3.org/2000/svg" width="24" height="48" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M5 12h14M12 5l7 7-7 7"/></svg>
            </button>
        </div>
    </div>


    <div class="landscape-view">
        <div class="container-fluid">
            <div class="header-info-simple">
                {% if logo_path %}
                    <img src="{{ url_for('static', filename=logo_path) }}" alt="–õ–æ–≥–æ—Ç–∏–ø" class="logo-img-landscape">
                {% endif %}
                <div class="header-datetime-landscape">
                    <span id="current-date-landscape">{{ current_date }}</span>
                    <span id="live-time-landscape">00:00:00</span>
                </div>
            </div>

            {% if schedule_for_today and active_day_name %}
                <h1 class="main-title">{{ active_day_name }}</h1>
                {% if schedule_for_today.landscape_slides and schedule_for_today.landscape_slides|length > 0 %}
                    <div id="scheduleCarousel" class="carousel slide" data-bs-ride="carousel" data-bs-pause="false" data-bs-interval="{{ carousel_interval * 1000 }}">
                        <div class="carousel-inner">

                            {% for slide_group in schedule_for_today.landscape_slides %}
                                <div class="carousel-item {% if loop.first %}active{% endif %}">
                                    <div class="grade-pair-container">
                                        {% for grade_data in slide_group %}
                                            <div class="card">
                                                <div class="card-header"><h4 class="m-0 text-center">{{ grade_data.grade_key }}</h4></div>
                                                <div class="card-body">
                                                    <div class="table-responsive">
                                                        <table class="table table-bordered table-striped mb-0">
                                                            <thead>
                                                                <tr>
                                                                    <th style="width: 3%;" class="text-center">‚Ññ</th>
                                                                    <th style="width: 7%;" class="text-center">–í—Ä–µ–º—è</th>
                                                                    {% for class_name in grade_data.class_names %}
                                                                        <th>{{ class_name }}</th>
                                                                    {% endfor %}
                                                                </tr>
                                                            </thead>
                                                            <tbody>
                                                                {% for row in grade_data.schedule_rows %}
                                                                <tr data-time-start="{{ row['–≤—Ä–µ–º—è'] }}">
                                                                    <td class="text-center">{{ row['—É—Ä–æ–∫'] }}</td>
                                                                    <td class="text-center">{{ row['–≤—Ä–µ–º—è'] }}</td>
                                                                    {% for class_name in grade_data.class_names %}
                                                                        <td>{{ row.–ø—Ä–µ–¥–º–µ—Ç—ã.get(class_name, '') }}</td>
                                                                    {% endfor %}
                                                                </tr>
                                                                {% endfor %}
                                                            </tbody>
                                                        </table>
                                                    </div>
                                                </div>
                                            </div>
                                        {% endfor %}
                                    </div>
                                </div>
                            {% endfor %}
                        </div>
                    </div>
                {% elif lessons_are_over %}
                    <div class="alert alert-primary text-center mt-4"><h4>–°–µ–π—á–∞—Å –∑–∞–Ω—è—Ç–∏–π –Ω–µ—Ç.</h4></div>
                {% else %}
                    <div class="alert alert-info text-center mt-4"><h4>–ó–∞–Ω—è—Ç–∏–π —Å–µ–≥–æ–¥–Ω—è –Ω–µ—Ç.</h4></div>
                {% endif %}
            {% elif is_weekend %}
                <h1 class="main-title">–í–æ—Å–∫—Ä–µ—Å–µ–Ω—å–µ</h1>
                <div class="alert alert-info text-center mt-4"><h4>–°–µ–≥–æ–¥–Ω—è –≤—ã—Ö–æ–¥–Ω–æ–π –¥–µ–Ω—å!</h4></div>
            {% else %}
                <div class="alert alert-warning text-center mt-4" role="alert">–ù–∞ —Å–µ–≥–æ–¥–Ω—è —Ä–∞—Å–ø–∏—Å–∞–Ω–∏—è –Ω–µ—Ç –∏–ª–∏ –æ–Ω–æ –Ω–µ –∑–∞–≥—Ä—É–∂–µ–Ω–æ.</div>
            {% endif %}
        </div>
    </div>

    <div id="help-modal" class="modal-overlay" style="display: none;">
        <div class="modal-content">
            <button id="close-modal" class="modal-close" aria-label="–ó–∞–∫—Ä—ã—Ç—å">&times;</button>
            <h4>–ü–æ–¥—Å–∫–∞–∑–∫–∞</h4>
            <p>–í–∞—à –≤—ã–±–æ—Ä –∫–ª–∞—Å—Å–∞ –∏ –ø–∞—Ä–∞–ª–ª–µ–ª–∏ —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏. –ö–æ–≥–¥–∞ –≤—ã –æ—Ç–∫—Ä–æ–µ—Ç–µ —Å–∞–π—Ç –≤ —Å–ª–µ–¥—É—é—â–∏–π —Ä–∞–∑, —Ä–∞—Å–ø–∏—Å–∞–Ω–∏–µ –¥–ª—è –≤—ã–±—Ä–∞–Ω–Ω–æ–≥–æ –∫–ª–∞—Å—Å–∞ –∑–∞–≥—Ä—É–∑–∏—Ç—Å—è —Å—Ä–∞–∑—É.</p>
            <p>–ö–Ω–æ–ø–∫–∞ "–°–±—Ä–æ—Å" –æ—á–∏—â–∞–µ—Ç —Å–æ—Ö—Ä–∞–Ω–µ–Ω–Ω—ã–π –≤—ã–±–æ—Ä.</p>
            <hr>
            <p><strong>–û–±–æ–∑–Ω–∞—á–µ–Ω–∏—è —É—Ä–æ–∫–æ–≤:</strong></p>
            <ul class="legend-list">
                <li><span class="legend-color current"></span> ‚Äî —Ç–µ–∫—É—â–∏–π —É—Ä–æ–∫</li>
                <li><span class="legend-color next"></span> ‚Äî —Å–ª–µ–¥—É—é—â–∏–π —É—Ä–æ–∫</li>
            </ul>
        </div>
    </div>

    <script src="{{ url_for('static', filename='js/bootstrap.bundle.min.js') }}"></script>

    <script>
        // –°–æ–∑–¥–∞—ë–º –≥–ª–æ–±–∞–ª—å–Ω—ã–π –æ–±—ä–µ–∫—Ç –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ –¥–ª—è –Ω–∞—à–µ–≥–æ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
        window.APP_DATA = {
            activeDayName: '{{ active_day_name }}',
            currentTime: '{{ current_time }}',
            refreshInterval: {{ refresh_interval }},
            scheduleName: '{{ current_schedule_name }}'
        };
    </script>

    <script src="{{ url_for('static', filename='js/main.js') }}"></script>
</body>
</html>

