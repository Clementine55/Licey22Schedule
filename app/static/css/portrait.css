/* app/static/css/portrait.css */

@keyframes slideInUp { from { transform: translateY(100%); } to { transform: translateY(0); } }

.portrait-view { position: relative; flex-direction: column; min-height: 100vh; box-sizing: border-box; padding-top: calc(1.5rem + env(safe-area-inset-top)); padding-left: env(safe-area-inset-left); padding-right: env(safe-area-inset-right); transition: padding-top 0.4s ease-in-out; }
.portrait-view .container { flex-grow: 1; display: flex; flex-direction: column; width: 100%; padding-left: 1rem; padding-right: 1rem; }
.content-wrapper { flex-grow: 1; display: flex; flex-direction: column; }

/* 1. Настройки контейнера хедера (Позиция и Контент) */
.portrait-view .header {
    /* Расположение элементов */
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: 1.5rem;

    /* Важно для позиционирования фона */
    z-index: 100;

    /* Убираем фон и блюр отсюда, переносим в ::before */
    background: transparent;
    backdrop-filter: none;
    -webkit-backdrop-filter: none;

    transition: all 0.4s ease-in-out;
}

/* 2. Настройки фона "матовое стекло" с фейдом (Виртуальный слой) */
.portrait-view .header::before {
    content: "";
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: calc(100% + 3rem);

    /* Чтобы фон был ПОД текстом */
    z-index: -1;

    /* Сам эффект стекла */
    backdrop-filter: blur(12px);
    -webkit-backdrop-filter: blur(12px);

    /* --- МАГИЯ ФЕЙДА (Градиентная маска) --- */
    /* Сверху (black) полностью видно, к низу (transparent) исчезает */
    /* 85% высоты - четко, последние 15% - плавное исчезновение */
    -webkit-mask-image: linear-gradient(to bottom, black 75%, transparent 100%);
    mask-image: linear-gradient(to bottom, black 75%, transparent 100%);

    /* Блокируем события мыши на свисающей части, чтобы можно было кликать на расписание под ней */
    pointer-events: none;
}

.portrait-view .logo-img { display: block; max-width: 280px; height: auto; opacity: 0.9; }
.portrait-view .header-info { display: flex; flex-direction: column; align-items: flex-end; font-weight: bold; font-size: 2.4rem; line-height: 1.4; color: #cbd5e1; }
.selection-panel { position: fixed; bottom: calc(0.5rem + env(safe-area-inset-bottom)); left: calc(1rem + env(safe-area-inset-left)); right: calc(1rem + env(safe-area-inset-right)); z-index: 1010; background-color: rgba(20, 30, 48, 0.75); backdrop-filter: blur(10px); -webkit-backdrop-filter: blur(10px); border: 1px solid rgba(255, 255, 255, 0.1); padding: 0.9rem 1.5rem; border-radius: 1.5rem; box-shadow: 0 -5px 25px rgba(0, 0, 0, 0.2); max-width: 650px; margin: 0 auto; animation: slideInUp 0.7s ease-out 0.3s both; }
@media (min-width: 576px) { .selection-panel { left: 50%; transform: translateX(-50%); width: calc(100% - 2rem); } }
.selection-panel .btn-toggle { transition: background-color 0.2s ease-in-out, border-color 0.2s ease-in-out; }
#show-schedule-btn.btn-primary.active, #show-consultations-btn.btn-primary.active, #back-to-days-btn { background-color: var(--custom-dark-blue) !important; border-color: var(--custom-dark-blue) !important; color: white !important; }
#back-to-days-btn:hover { background-color: var(--custom-dark-blue-hover) !important; border-color: var(--custom-dark-blue-hover) !important; }
#schedule-content, #consultation-content { flex-grow: 1; display: flex; flex-direction: column; justify-content: center; }
#schedule-display.is-prompting { display: flex; justify-content: center; align-items: center; }
.initial-prompt { display: flex; flex-direction: column; justify-content: center; align-items: center; text-align: center; color: #64748b; padding: 2rem; padding-bottom: 5em;}
#prompt-content { display: flex; flex-direction: column; justify-content: center; align-items: center; }
.prompt-icon { font-size: 4rem; line-height: 1; margin-bottom: 1rem; }
.initial-prompt h3 { color: #cbd5e1; font-weight: bold; }
.prompt-help { text-align: center;}
.help-button { width: 40px; height: 40px; border-radius: 50%; background-color: rgba(71, 85, 105, 0.7); border: 1px solid rgba(255, 255, 255, 0.1); color: #cbd5e1; font-size: 1.5rem; font-weight: bold; cursor: pointer; transition: all 0.2s ease-in-out; }
.help-button:hover { background-color: rgba(100, 116, 139, 0.8); transform: scale(1.1); }
.schedule-day-card { background-color: rgba(30, 41, 59, 0.8); border: 1px solid rgba(255, 255, 255, 0.1); border-radius: 0.5rem; }
.schedule-day-header { font-size: 1.5rem; font-weight: bold; padding: 0.70rem 1.25rem; border-bottom: 1px solid rgba(255, 255, 255, 0.1); text-align: center; }
.portrait-view .table { --bs-table-bg: transparent; --bs-table-striped-bg: rgba(255, 255, 255, 0.03); --bs-table-border-color: transparent; }
.portrait-view .table td, .portrait-view .table th { vertical-align: middle; text-align: center; }
.portrait-view .lesson-num-col { width: 10%; }
.portrait-view .time-col { width: 30%; }
.portrait-view .room-col { width: 15%; }
.day-selector-container { display: flex; flex-direction: column; justify-content: center; align-items: center; gap: 1rem; padding: 1rem; width: 100%; }
.day-selector-btn { width: 100%; max-width: 400px; font-size: 1.5rem; font-weight: 500; padding: 1rem; border-radius: 0.75rem; background-color: rgba(30, 41, 59, 0.8); border: 1px solid rgba(255, 255, 255, 0.1); color: #cbd5e1; transition: all 0.2s ease-in-out; }
.day-selector-btn:hover { background-color: rgba(51, 65, 85, 0.9); border-color: rgba(255, 255, 255, 0.2); transform: translateY(-3px); color: #fff; }

/* ИЗМЕНЕНИЕ: Убираем пустое место сверху, когда расписание выбрано */
@media (max-width: 768px) {
    .portrait-view:not(.initial-state) .header {
        opacity: 0;
        transform: translateY(-20px);
        pointer-events: none;

        /* Добавляем правила для полного "схлопывания" элемента, чтобы убрать дыру */
        height: 0;
        padding: 0;
        margin-bottom: 0; /* Самое важное - убрать нижний отступ */
        overflow: hidden;
    }
    .portrait-view:not(.initial-state) {
        /* Уменьшаем верхний отступ, когда расписание показано, оставляя только безопасную зону */
        padding-top: calc(0.5rem + env(safe-area-inset-top));
    }

    .portrait-view .header::before {
        /* Отключаем размытие */
        backdrop-filter: none !important;
        -webkit-backdrop-filter: none !important;

        /* Убираем фон (делаем прозрачным), так как на мобильном */
        /* шапка обычно не наезжает на контент, а скроллится вместе с ним */
        background-color: transparent !important;

        /* Убираем нижнюю линию */
        border-bottom: none !important;
    }
}
.selection-panel { transition: transform 0.4s ease-in-out, opacity 0.4s ease-in-out; }
@media (min-width: 768px) and (min-height: 800px) and (orientation: portrait) {
    .portrait-view { justify-content: center; }
    .portrait-view .header {
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        box-sizing: border-box;
        padding: calc(2.0rem + env(safe-area-inset-top)) 5rem 2rem 5rem;
        z-index: 10;
        margin-bottom: 0; }

        .portrait-view .container { flex-grow: 0; padding-top: 11rem; }
        .selection-panel { position: static !important; transform: none !important; margin-top: 2.5rem; }
        .content-spacer { display: none !important; }
        .portrait-view.schedule-selected .selection-panel, .portrait-view.consultation-mode .selection-panel { opacity: 0; transform: scale(0.9) !important; pointer-events: none; } }
@media (max-width: 576px) and (orientation: portrait) { html { font-size: 14px; } .portrait-view .header { justify-content: center; } .portrait-view .header-info { display: none; } .selection-panel .form-label { font-size: 0.8rem; } .selection-panel .form-select, .selection-panel .btn { font-size: 0.9rem; padding-top: 0.6rem; padding-bottom: 0.6rem; } }

